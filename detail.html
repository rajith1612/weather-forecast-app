{% extends "base.html" %}
{% block content %}

<h2>Weather Details – Record #{{ query.id }}</h2>

<section class="card">
  <p><strong>Original input:</strong> {{ query.user_input }}</p>
  <p><strong>Location:</strong> {{ query.normalized_name or "-" }}</p>
  <p><strong>Latitude:</strong> {{ query.lat }}</p>
  <p><strong>Longitude:</strong> {{ query.lon }}</p>
  <p><strong>Date range:</strong>
    {{ query.start_date or "-" }} → {{ query.end_date or "-" }}</p>
  <p><strong>Created at:</strong> {{ query.created_at }}</p>
</section>

{% if weather %}
<section class="card">
  <h3>Current Weather</h3>
  <p><strong>Temperature:</strong> {{ weather.main.temp }} °C</p>
  <p><strong>Feels like:</strong> {{ weather.main.feels_like }} °C</p>
  <p><strong>Condition:</strong> {{ weather.weather[0].description }}</p>
</section>
{% endif %}

{% if forecast %}
<section class="card">
  <h3>Forecast (first 10 entries)</h3>
  <ul class="forecast-list">
    {% for item in forecast.list[:10] %}
      <li>
        {{ item.dt_txt }} – {{ item.main.temp }} °C,
        {{ item.weather[0].description }}
      </li>
    {% endfor %}
  </ul>
</section>
{% endif %}

<p>
  <a href="{{ url_for('edit', query_id=query.id) }}">Edit this record</a> |
  <a href="{{ url_for('history') }}">Back to history</a>
</p>

{% endblock %}
